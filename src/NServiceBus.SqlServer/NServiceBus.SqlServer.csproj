<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>net452</TargetFrameworks>
    <RootNamespace>NServiceBus.SqlServer</RootNamespace>
    <AssemblyName>NServiceBus.Transport.SqlServer</AssemblyName>
    <SignAssembly>true</SignAssembly>
    <AssemblyOriginatorKeyFile>..\NServiceBus.snk</AssemblyOriginatorKeyFile>
    <OutputPath>..\..\binaries\</OutputPath>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <PackageId>NServiceBus.SqlServer</PackageId>
  </PropertyGroup>

  <ItemGroup>
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Configuration" />
    <Reference Include="System.Transactions" />

    <PackageReference Include="Fody" Version="2.1.0" PrivateAssets="All" />
    <PackageReference Include="Janitor.Fody" Version="1.4.1" PrivateAssets="All" />
    <PackageReference Include="Obsolete.Fody" Version="4.2.2" PrivateAssets="All" />
    <PackageReference Include="Particular.CodeRules" Version="0.2.0" PrivateAssets="All" />
    <PackageReference Include="NServiceBus" Version="6.0.0" PrivateAssets="All" />
    <PackageReference Include="GitVersionTask" Version="4.0.0-beta0011" />
    <PackageReference Include="NuGetPackager" Version="0.6.5" />
    <Reference Include="System.Web.Services" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Addressing\EndpointSchemaAndCatalogSettings.cs" />
    <Compile Include="Addressing\QueueAddress.cs" />
    <Compile Include="Addressing\TableSchemaAndCatalogSettings.cs" />
    <Compile Include="AssemblyInfo.cs" />
    <Compile Include="Configuration\ConnectionPoolValidator.cs" />
    <Compile Include="Configuration\SqlConnectionFactory.cs" />
    <Compile Include="Configuration\ConnectionStringsValidator.cs" />
    <Compile Include="Configuration\SettingsKeys.cs" />
    <Compile Include="Configuration\ValidationCheckResult.cs" />
    <Compile Include="DelayedDelivery\DelayedDeliveryInfrastructure.cs" />
    <Compile Include="DelayedDelivery\PreventRoutingMessagesToTimeoutManager.cs" />
    <Compile Include="DelayedDelivery\DelayedDeliverySettings.cs" />
    <Compile Include="DelayedDelivery\DelayedMessageRow.cs" />
    <Compile Include="DelayedDelivery\DelayedMessageTable.cs" />
    <Compile Include="DelayedDelivery\DelayedMessageHandler.cs" />
    <Compile Include="Guard.cs" />
    <Compile Include="InternalsVisibleTo.cs" />
    <Compile Include="Legacy\LegacyCallbacks.cs" />
    <Compile Include="DelayedDelivery\DelayedDeliveryMessagePump.cs" />
    <Compile Include="DelayedDelivery\DelayedDeiveryTableBasedQueueFactory.cs" />
    <Compile Include="Queuing\ITableBasedQueueOperationsReader.cs" />
    <Compile Include="Queuing\TableBasedQueueOperationsReader.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyMessageDispatcher.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyQueueAddressTranslator.cs" />
    <Compile Include="Legacy\MultiInstance\LegacySql.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyCanonicalQueueAddress.cs" />
    <Compile Include="DelayedDelivery\DelayedMessageProcessor.cs" />
    <Compile Include="DelayedDelivery\DelayedDeliveryQueueCreator.cs" />
    <Compile Include="Receiving\QueuePeekerOptions.cs" />
    <Compile Include="Sending\IQueueDispatcher.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyQueueCreator.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyQueuePeeker.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyQueuePurger.cs" />
    <Compile Include="Legacy\MultiInstance\LegacyProcessWithTransactionScope.cs" />
    <Compile Include="Legacy\MultiInstance\LegacySqlConnectionFactory.cs" />
    <Compile Include="Legacy\MultiInstance\LegacySqlServerTransportInfrastructure.cs" />
    <Compile Include="obsoletes.cs" />
    <Compile Include="Queuing\DictionarySerializer.cs" />
    <Compile Include="Receiving\ExpiredMessagesPurger.cs" />
    <Compile Include="Receiving\IPeekMessagesInQueue.cs" />
    <Compile Include="Receiving\IPurgeQueues.cs" />
    <Compile Include="Receiving\IsolationLevelMapper.cs" />
    <Compile Include="Receiving\QueuePeeker.cs" />
    <Compile Include="Receiving\QueuePurger.cs" />
    <Compile Include="Receiving\RepeatedFailuresOvertimeCurcuitBreaker.cs" />
    <Compile Include="Receiving\ProcessWithTransactionScope.cs" />
    <Compile Include="Queuing\SqlConstants.cs" />
    <Compile Include="Queuing\Message.cs" />
    <Compile Include="Queuing\MessageRow.cs" />
    <Compile Include="Addressing\CanonicalQueueAddress.cs" />
    <Compile Include="Addressing\QueueAddressTranslator.cs" />
    <Compile Include="Resharper.Annotations.g.cs" />
    <Compile Include="Sending\MessageDispatcher.cs" />
    <Compile Include="Configuration\SqlScopeOptions.cs" />
    <Compile Include="Sending\TableBasedQueueDispatcher.cs" />
    <Compile Include="SqlServerTransport.cs" />
    <Compile Include="Receiving\MessagePump.cs" />
    <Compile Include="Queuing\MessageReadResult.cs" />
    <Compile Include="Receiving\ProcessWithNativeTransaction.cs" />
    <Compile Include="Receiving\ProcessWithNoTransaction.cs" />
    <Compile Include="Receiving\ReceiveStrategy.cs" />
    <Compile Include="Receiving\QueueCreator.cs" />
    <Compile Include="SqlServerTransportInfrastructure.cs" />
    <Compile Include="SqlServerTransportSettingsExtensions.cs" />
    <Compile Include="Queuing\TableBasedQueue.cs" />
    <Compile Include="Sending\UsingV2ConfigurationChecker.cs" />
    <Compile Include="TaskEx.cs" />
    <Compile Include="Receiving\FailureInfoStorage.cs" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="FodyWeavers.xml" />
  </ItemGroup>
  <ItemGroup>
    <None Include="packages.config">
      <SubType>Designer</SubType>
    </None>
  </ItemGroup>

  <ItemGroup>
    <Content Include="$(OutputPath)\**\$(AssemblyName).pdb">
      <Pack>true</Pack>
      <PackagePath>lib\</PackagePath>
    </Content>
  </ItemGroup>

</Project>